###
#  Ansible configuration vars file for:
#  A basic VSIM with standard ONTAP cluster & vserver configuration
#  with: 
#   - 6 NICs
#   - 28 disks - 25 spares
###

###
# Broadcast Domain name varibles
bd:
  mgmt:         mgmt  # e0c ports (VSIM)
  nas:          data  # a0a ports

# Broadcast-domain split: Active Management ports
bcd:
  split_ports:
  - old_bd:     Default
    new_bd:     "{{ bd.mgmt }}"
    ports:      '["{{ clus.name }}-01:e0c", "{{ clus.name }}-02:e0c"]'
    #   ports:        '["{{ cluster }}-01:e0M", "{{ cluster }}-02:e0M"]'


###
# Autosupport Configuration Varibles
asup:

  # Standard Config varibles
  proxy_url:
  transport:    smtp
  noteto:       admin@example.local
  mailhosts:    192.168.7.3
  hostsubj:     true
  to:           'netapp_admin@{{ clus.net.dns.domain }}'
  from:         '{{ clus.name }}@{{ clus.net.dns.domain }}'
  partner:      ''

  # Node Specific Config parameters - node list
asup_config:
# - node:       '{{ clus.name }}-01'
#   proxy_url:  '{{ asup.proxy_url }}'
#   transport:  '{{ asup.transport }}'
#   mailhosts:  '{{ asup.mailhosts }}'
#   hostsubj:   '{{ asup.hostsubj }}'
#   from:       '{{ asup.from }}'
#   to:         '{{ asup.to }}'
#   noteto:     '{{ asup.noteto }}'
#   partner:    '{{ asup.partner }}'
# - node:       '{{ clus.name }}-02'
#   proxy_url:  '{{ asup.proxy_url }}'
#   transport:  '{{ asup.transport }}'
#   mailhosts:  '{{ asup.mailhosts }}'
#   hostsubj:   '{{ asup.hostsubj }}'
#   from:       '{{ asup.from }}'
#   to:         '{{ asup.to }}'
#   noteto:     '{{ asup.noteto }}'
#   partner:    '{{ asup.partner }}'


###
# RBAC Configuration
# User and Role Configuration Varibles
###

# role_cmds:
#   - { name: 'netapp_harvest', cmddir: 'version', level: 'readonly', svm: "{{ cluster }}" }
#   - { name: 'netapp_harvest', cmddir: 'cluster identity show', level: 'readonly', svm: "{{ cluster }}" }
#   - { name: 'netapp_harvest', cmddir: 'cluster show', level: 'readonly', svm: "{{ cluster }}" }
#   - { name: 'netapp_harvest', cmddir: 'system node show', level: 'readonly', svm: "{{ cluster }}" }
#   - { name: 'netapp_harvest', cmddir: 'statistics', level: 'readonly', svm: "{{ cluster }}" }
#   - { name: 'netapp_harvest', cmddir: 'lun show', level: 'readonly', svm: "{{ cluster }}" }
#   - { name: 'netapp_harvest', cmddir: 'network interface show', level: 'readonly', svm: "{{ cluster }}" }
#   - { name: 'netapp_harvest', cmddir: 'qos workload show', level: 'readonly', svm: "{{ cluster }}" }

user_list:
  - { name: 'harvest', app: 'ontapi', auth: 'password', role: 'readonly', pass: "{{ netapp_password }}", svm: "{{ cluster }}" }
  # - { name: 'netapp_harvest', app: 'ontapi', auth: 'password', role: 'netapp_harvest', pass: 'T3mp-p@55', svm: "{{ cluster }}" }
  # - { name: 'netapp_pse', app: 'ontapi', auth: 'password', role: 'admin', pass: 'T3mp-p@55', svm: "{{ cluster }}" }
  # - { name: 'netapp_pse', app: 'console', auth: 'password', role: 'admin', pass: 'T3mp-p@55', svm: "{{ cluster }}" }
  # - { name: 'netapp_pse', app: 'http', auth: 'password', role: 'admin', pass: 'T3mp-p@55', svm: "{{ cluster }}" }
  # - { name: 'netapp_pse', app: 'service-processor', auth: 'password', role: 'admin', pass: 'T3mp-p@55', svm: "{{ cluster }}" }
  # - { name: 'netapp_pse', app: 'ssh', auth: 'password', role: 'admin', pass: 'T3mp-p@55', svm: "{{ cluster }}" }
  # - { name: 'storage_api', app: 'ontapi', auth: 'password', role: 'admin', pass: 'T3mp-p@55', svm: "{{ cluster }}" }
  # - { name: 'storage_api', app: 'ontapi', auth: 'password', role: 'vsadmin', pass: 'T3mp-p@55', svm: "{{ svm }}" }
  # - { name: 'snmp', app: 'snmp', auth: 'usm', role: 'readonly', pass: 'T3mp-p@55', svm: "{{ svm }}" }

###
# Export-Policy Management
# Note: Replace networks that are valid to the environment & adjust as needed
###

svm_export_policy_name:
- { svm: "{{ svm.name }}", name: 'Data' }

export_policy_rules_list:
- { name: 'default', svm: "{{ svm.name }}", client_match: '192.168.7.125', rule_index: 1, protocol: nfs, ro_rule: 'sys', rw_rule: 'sys', super_user_security: 'sys' }
- { name: 'default', svm: "{{ svm.name }}", client_match: '192.168.7.0/24', rule_index: 2, protocol: any, ro_rule: 'any', rw_rule: 'none', super_user_security: 'none' }
- { name: 'Data', svm: "{{ svm.name }}", client_match: '192.168.7.0/24', rule_index: 1, protocol: nfs, ro_rule: 'any', rw_rule: 'any', super_user_security: 'sys' }
- { name: 'Data', svm: "{{ svm.name }}", client_match: '0.0.0.0/0', rule_index: 2, protocol: nfs, ro_rule: 'any', rw_rule: 'none', super_user_security: 'none' }

###
# LS Mirrors
###
ls_mirrors:
  - { aggr: "{{ cluster | replace('-','_') }}_01_aggr1", name: "{{ svm | replace('-','_') }}_root_mir1", svm: "{{ svm }}" }
  - { aggr: "{{ cluster | replace('-','_') }}_02_aggr1", name: "{{ svm | replace('-','_') }}_root_mir2", svm: "{{ svm }}" }

###
# Event Destinations & Log Forwarding
# Needs more attention to ensure configuration is correct
###



###
# Custom Modifications
###


